name: Contract CI/CD

on:
    pull_request:
        branches:
        - master
        - develop
        paths:
        - 'contract/**'
    workflow_dispatch:
jobs:
    contract_ci_cd:
        runs-on: ubuntu-latest
        steps:
            - name: ğŸ›« Checkout code
              uses: actions/checkout@v2

            - name: ğŸ— Setup Node.js
              uses: actions/setup-node@v2
              with:
                node-version: 18.14.0
                cache: 'npm'

            - name: âš™ï¸ NPM install
              run: npm install
              working-directory: ./contract

            - name: âš’ï¸ Run Compile
              run: npm run compile
              working-directory: ./contract

            - name: âš’ï¸ Create Typechain
              run: npm run typechain
              working-directory: ./contract

            - name: ğŸ§ª Run Test
              run: npm run test
              working-directory: ./contract
            
            - name: ğŸš€ Tips Deployment
              run: npm run deploy:tips
              working-directory: ./contract
